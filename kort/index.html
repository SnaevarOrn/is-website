<!DOCTYPE html>
<html lang="is" data-theme="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ís.is — Kort</title>
  <meta name="description" content="Opinn, gagnsær og kökulaus kortavettvangur byggður á OpenStreetMap." />

  <!-- Favicons -->
  <link rel="icon" href="/favicon.svg" type="image/svg+xml">
  <link rel="icon" href="/favicon.png" sizes="32x32">
  <link rel="icon" href="/favicon.png" sizes="16x16">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">

  <meta name="theme-color" content="#0b0c0f" id="metaThemeColor">

  <!-- prefs.js should run BEFORE paint (theme / prefs) -->
  <script src="/assets/js/prefs.js"></script>

  <!-- Shared CSS -->
  <link rel="stylesheet" href="/assets/css/base.css">
  <link rel="stylesheet" href="/assets/css/components.css">

  <!-- Page CSS -->
  <link rel="stylesheet" href="/assets/css/pages/kort.css">

  <!-- MapLibre CSS -->
  <link rel="stylesheet" href="https://unpkg.com/maplibre-gl@4.7.1/dist/maplibre-gl.css">
</head>

<body>
  <!-- Close / back to home -->
  <a class="kort-close" href="/" aria-label="Til forsíðu" title="Til forsíðu">×</a>

  <main class="kort-page">

    <!-- Header -->
    <header class="kort-head">
      <div class="kort-head-left">
        <h1 id="kort-title">Ísland</h1>
        <p class="kort-sub">
          Kort byggt á OpenStreetMap.
        </p>
      </div>

      <!-- Search (mobile-friendly: submit on “Search/Go”) -->
      <form class="kort-search" id="kortSearchForm" role="search">
        <input
          id="kortSearch"
          name="q"
          type="search"
          placeholder="Leita að heimilisfangi eða stað…"
          autocomplete="off"
          aria-label="Leita á korti"
          enterkeyhint="search"
          inputmode="search"
        />
      </form>
    </header>

    <!-- Map container -->
    <section class="kort-card" aria-labelledby="kort-title">
      <div id="kort-map" class="kort-map" role="application" aria-label="Kort Íslands"></div>

      <div class="kort-foot">
        <div class="kort-foot-left">
          <button class="kort-btn kort-btn-ghost" id="btnCrosshair" type="button" aria-pressed="false" title="Sýna/fela miðju-kross">
            Crosshair
          </button>
      
          <span id="kortState" class="kort-state">—</span>
          <span id="kortAlt" class="kort-alt" hidden>hæð: —</span>
        </div>
      
        <button class="kort-btn kort-btn-ghost" id="btnCopyState" type="button" title="Afrita miðju korts">
          Afrita staðsetningu
        </button>
      </div>
    </section>

  </main>

  <!-- Side panel (hamburger opens this) -->
  <aside id="kortPanel" class="kort-panel" aria-hidden="true">
  <div class="kort-panel-head">
    <div class="kort-panel-title">Valmynd</div>
    <button class="kort-panel-x" id="kortPanelClose" type="button" aria-label="Loka">×</button>
  </div>

  <div class="kort-panel-body">
    <!-- Accordion: Hamur -->
    <details class="kort-acc" data-acc>
      <summary class="kort-acc-sum">
        <span>Hamur</span>
        <span class="kort-acc-hint" id="kortHintMode">Venjulegt</span>
      </summary>
      <div class="kort-acc-box">
        <button class="kort-panel-item" type="button" data-mode="default">Venjulegt</button>
        <button class="kort-panel-item" type="button" data-mode="quiz_towns">Leikjahamur: giskaðu á bæi</button>
        <button class="kort-panel-item" type="button" data-mode="quiz_glaciers">Leikjahamur: giskaðu á jökla</button>
        <button class="kort-panel-item" type="button" data-mode="wrecks">Skipsflök</button>
      </div>
    </details>

    <!-- Accordion: Viðmót -->
    <details class="kort-acc" data-acc>
      <summary class="kort-acc-sum">
        <span>Viðmót</span>
        <span class="kort-acc-hint">Stillingar</span>
      </summary>
      <div class="kort-acc-box">
        <button class="kort-panel-item" type="button" id="kortGoHome">Sýna allt Ísland (home)</button>
        <button class="kort-panel-item" type="button" id="kortUseLocation">Nota staðsetningu</button>
      </div>
    </details>

    <!-- Accordion: Kort-útlit -->
    <details class="kort-acc" data-acc>
      <summary class="kort-acc-sum">
        <span>Kort-útlit</span>
        <span class="kort-acc-hint" id="kortHintStyle">Street</span>
      </summary>
      <div class="kort-acc-box">
        <button class="kort-panel-item" type="button" data-style="street">Street (OSM)</button>
        <button class="kort-panel-item" type="button" data-style="light">Light</button>
        <button class="kort-panel-item" type="button" data-style="dark">Dark</button>
        <button class="kort-panel-item" type="button" data-style="topo">Topo</button>
        <button class="kort-panel-item" type="button" data-style="satellite">Satellite</button>
      </div>
    </details>

    <p class="kort-panel-note">
      Minni hávaði, meiri stjórn. Þetta er bara UI; “modes” halda áfram að vera stækkanleg.
    </p>
  </div>
</aside>

<div id="kortPanelBackdrop" class="kort-panel-backdrop" hidden></div>

  <!-- MapLibre JS -->
  <script src="https://unpkg.com/maplibre-gl@4.7.1/dist/maplibre-gl.js"></script>

  <!-- Page JS (order matters) -->
  <script src="/assets/js/pages/kort.js" defer></script>
  <script src="/assets/js/pages/kort.controls.js" defer></script>
  <script src="/assets/js/pages/kort.search.js" defer></script>
  <script src="/assets/js/pages/kort.modes.js" defer></script>
  <script src="/assets/js/pages/kort.menu.js" defer></script>
</body>
</html>
