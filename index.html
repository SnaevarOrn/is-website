<!DOCTYPE html>
<html lang="is">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>√≠s.is</title>

  <link rel="icon" href="/favicon.svg" type="image/svg+xml">
  <link rel="icon" href="/favicon.png" sizes="32x32">
  <link rel="icon" href="/favicon.png" sizes="16x16">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">

  <style>
    :root{
      --bg0:#07090c;
      --bg1:#0b0f16;
      --card: rgba(18,18,20,.72);
      --card2: rgba(18,18,20,.92);
      --line: rgba(255,255,255,.10);
      --txt: rgba(255,255,255,.92);
      --muted: rgba(255,255,255,.72);
      --muted2: rgba(255,255,255,.58);
      --ice: #bfe9ff;
      --ice2:#e6f6ff;
      --shadow: 0 20px 60px rgba(0,0,0,.55);
      --r: 22px;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      color:var(--txt);
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background:
        radial-gradient(1200px 800px at 20% 10%, rgba(191,233,255,.12), transparent 60%),
        radial-gradient(900px 700px at 85% 30%, rgba(191,233,255,.08), transparent 65%),
        linear-gradient(180deg, var(--bg0), var(--bg1));
      display:flex;
      justify-content:center;
      padding: 18px 14px 28px;
    }

    .wrap{
      width:min(720px, 100%);
      display:flex;
      flex-direction:column;
      gap: 16px;
    }

    /* Top bar */
    .topbar{
      position:relative;
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding: 10px 6px 0;
    }

    .brand{
      display:flex;
      align-items:center;
      gap: 10px;
      font-weight: 700;
      letter-spacing: .2px;
      font-size: 20px;
      opacity: .96;
      user-select:none;
    }

    .left-icon{
      width: 38px;
      height: 38px;
      border-radius: 14px;
      border: 1px solid var(--line);
      background: rgba(255,255,255,.04);
      display:grid;
      place-items:center;
      color: var(--ice2);
      box-shadow: 0 10px 30px rgba(0,0,0,.35);
    }

    .menuBtn{
      width: 44px;
      height: 44px;
      border-radius: 16px;
      border: 1px solid var(--line);
      background: rgba(255,255,255,.04);
      color: var(--txt);
      display:grid;
      place-items:center;
      cursor:pointer;
      box-shadow: 0 10px 30px rgba(0,0,0,.35);
    }
    .menuBtn:active{transform: translateY(1px);}

    /* Dropdown */
    .menu-dropdown{
      position:absolute;
      right: 0;
      top: 58px;
      width: 280px;
      background: var(--card2);
      border: 1px solid var(--line);
      border-radius: 16px;
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      padding: 8px;
      display:none;
      z-index: 50;
      box-shadow: var(--shadow);
    }
    .menu-dropdown.open{display:block}

    .menu-item{
      width: 100%;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 12px;
      padding: 12px 12px;
      border-radius: 14px;
      background: transparent;
      border: 0;
      color: var(--txt);
      font-size: 16px;
      cursor: pointer;
      text-align:left;
    }
    .menu-item:hover{ background: rgba(255,255,255,.06); }

    /* Cards + buttons */
    .card{
      background: var(--card);
      border: 1px solid var(--line);
      border-radius: var(--r);
      padding: 16px;
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      box-shadow: 0 16px 50px rgba(0,0,0,.35);
    }

    .section-title{
      font-size: 18px;
      font-weight: 700;
      margin: 0 0 10px;
      opacity: .92;
    }

    .bigBtns{
      display:flex;
      flex-direction:column;
      gap: 12px;
    }

    .pill{
      width: 100%;
      padding: 16px 16px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.90);
      color: #0b0f16;
      font-weight: 750;
      font-size: 22px;
      display:flex;
      align-items:center;
      justify-content:center;
      gap: 10px;
      cursor:pointer;
      box-shadow: 0 12px 30px rgba(0,0,0,.35);
    }
    .pill:active{transform: translateY(1px);}
    .pill small{
      font-size: 14px;
      font-weight: 650;
      opacity: .75;
    }

    .pill.secondary{
      font-size: 20px;
      background: rgba(255,255,255,.88);
    }

    /* Footer banner */
    .banner{
      margin-top: auto;
      padding: 12px 14px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.05);
      color: rgba(255,255,255,.70);
      font-size: 14px;
      text-align:center;
    }

    /* Modal */
    .modal-backdrop{
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,.55);
      backdrop-filter: blur(6px);
      -webkit-backdrop-filter: blur(6px);
      display: grid;
      place-items: center;
      z-index: 100;
      padding: 18px;
    }

    .modal{
      width: min(620px, 100%);
      background: var(--card2);
      border: 1px solid var(--line);
      border-radius: 18px;
      box-shadow: var(--shadow);
      overflow: hidden;
    }

    .modal-head{
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding: 14px 16px;
      border-bottom: 1px solid rgba(255,255,255,.08);
    }

    .modal-head h2{
      margin:0;
      font-size: 18px;
      color: var(--txt);
    }

    .icon-btn{
      border:0;
      background: transparent;
      color: rgba(255,255,255,.85);
      font-size: 18px;
      cursor:pointer;
      padding: 8px 10px;
      border-radius: 10px;
    }
    .icon-btn:hover{ background: rgba(255,255,255,.06); }

    .modal-body{
      padding: 14px 16px 16px;
      color: rgba(255,255,255,.88);
      line-height: 1.45;
      font-size: 15px;
    }
    .modal-body p{ margin: 10px 0; }

    .modal-actions{
      display:flex;
      gap: 10px;
      margin-top: 14px;
      flex-wrap: wrap;
    }

    .primary-btn{
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(191,233,255,.16);
      color: rgba(255,255,255,.95);
      padding: 10px 12px;
      border-radius: 12px;
      cursor:pointer;
      font-weight: 700;
    }
    .primary-btn:hover{ background: rgba(191,233,255,.22); }

    .ghost-btn{
      border: 1px solid rgba(255,255,255,.14);
      background: transparent;
      color: rgba(255,255,255,.92);
      padding: 10px 12px;
      border-radius: 12px;
      cursor:pointer;
      font-weight: 700;
    }
    .ghost-btn:hover{ background: rgba(255,255,255,.06); }

    .fineprint{
      margin-top: 10px;
      font-size: 13px;
      opacity: .8;
    }

    /* Mobile feel */
    @media (max-width:420px){
      .pill{ font-size: 21px; }
    }
  </style>
</head>

<body>
  <div class="wrap">

    <div class="topbar">
      <div class="left-icon" title="√≠s.is">
        <!-- simple crossed tools icon -->
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
          <path d="M3 21L21 3" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          <path d="M8 3l4 4-5 5-4-4 5-5Z" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
          <path d="M16 12l5 5-4 4-5-5 4-4Z" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
        </svg>
      </div>

      <div class="brand">√≠s.is</div>

      <button id="menuBtn" class="menuBtn" type="button" aria-label="Valmynd">
        <!-- hamburger icon -->
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true">
          <path d="M4 7h16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          <path d="M4 12h16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          <path d="M4 17h16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>
      </button>

      <!-- Dropdown -->
      <div id="menuDropdown" class="menu-dropdown" aria-hidden="true">
        <button class="menu-item" id="menuContact" type="button">
          <span>Hafa samband</span>
          <span aria-hidden="true">‚úâÔ∏è</span>
        </button>

        <button class="menu-item" id="menuSettings" type="button">
          <span>Stillingar</span>
          <span aria-hidden="true">‚öôÔ∏è</span>
        </button>

        <button class="menu-item" id="menuAbout" type="button">
          <span>Um vefinn</span>
          <span aria-hidden="true">‚ÑπÔ∏è</span>
        </button>
      </div>
    </div>

    <!-- Main buttons -->
    <div class="card">
      <div class="bigBtns">
        <button class="pill" type="button" onclick="go('/joklar/')">
          J√∂klar <small>üßä</small>
        </button>

        <button class="pill secondary" type="button" onclick="go('/baejir/')">
          B√¶jir <small>üèòÔ∏è</small>
        </button>
      </div>
    </div>

    <!-- Tools -->
    <div class="card">
      <div class="section-title">Verkf√¶ri</div>
      <div class="bigBtns">
        <button class="pill secondary" type="button" onclick="go('/dagatal/')">
          Dagatal <small>üóìÔ∏è</small>
        </button>

        <button class="pill secondary" type="button" onclick="go('/klukka/')">
          Klukka <small>üïí</small>
        </button>
      </div>
    </div>

    <div class="banner">Vefur stofna√∞ur 2025. Engar vafrak√∂kur ‚Äì bara √çs.</div>

  </div>

  <!-- MODAL: UM VEFINN -->
  <div id="aboutModal" class="modal-backdrop" hidden>
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="aboutTitle">
      <div class="modal-head">
        <h2 id="aboutTitle">Um vefinn</h2>
        <button class="icon-btn" id="aboutClose" type="button" aria-label="Loka">‚úï</button>
      </div>

      <div class="modal-body">
        <p><strong>√≠s.is</strong> er sj√°lfst√¶tt verkefni unni√∞ af einstaklingi, √°n augl√Ωsinga, rekstrarf√©laga e√∞a gagnas√∂fnunar.</p>

        <p>Markmi√∞ vefsins er a√∞ mi√∞la √æekkingu um √çsland √° einfaldan, gagnvirkan og a√∞gengilegan h√°tt ‚Äì √≠ √æ√°gu almennings.</p>

        <p><strong>Vefurinn er opinn og √≥keypis.</strong><br>
        √ûeir sem vilja geta stutt vi√∞ √°framhaldandi √ær√≥un me√∞ frj√°lsu framlagi e√∞a endurgj√∂f. Sl√≠kur stu√∞ningur n√Ωtist beint √≠ uppbyggingu og vi√∞hald vefsins.</p>

        <p><strong>Engar augl√Ωsingar. Engar vafrak√∂kur. Bara √çsland.</strong></p>

        <div class="modal-actions">
          <button id="donateBtn" class="primary-btn" type="button">Styrkja verkefni√∞</button>
          <button id="feedbackBtn" class="ghost-btn" type="button">Senda endurgj√∂f</button>
        </div>

        <p class="fineprint" id="donateStatus" aria-live="polite"></p>
      </div>
    </div>
  </div>

  <script>
    // ---- routing helper
    function go(path){
      // tryggir trailing slash "snyrtilega"
      if (!path.endsWith('/')) path += '/';
      window.location.href = path;
    }

    // ---- hamburger open/close
    const menuBtn = document.getElementById('menuBtn');
    const menu = document.getElementById('menuDropdown');

    function closeMenu(){
      menu.classList.remove('open');
      menu.setAttribute('aria-hidden','true');
    }
    function openMenu(){
      menu.classList.add('open');
      menu.setAttribute('aria-hidden','false');
    }

    menuBtn.addEventListener('click', (e) => {
      e.stopPropagation();
      menu.classList.contains('open') ? closeMenu() : openMenu();
    });

    document.addEventListener('click', () => closeMenu());
    menu.addEventListener('click', (e) => e.stopPropagation());

    // ---- menu actions
    document.getElementById('menuContact').addEventListener('click', () => {
      closeMenu();
      window.location.href = 'mailto:hello@√≠s.is?subject=√≠s.is%20-%20samband';
    });

    document.getElementById('menuSettings').addEventListener('click', () => {
      closeMenu();
      alert('Stillingar: (placeholder) ‚Äî setjum h√©r t.d. d√∂kkt/lj√≥st, leturst√¶r√∞, o.s.frv.');
    });

    // ---- About modal
    const aboutModal = document.getElementById('aboutModal');
    const aboutClose = document.getElementById('aboutClose');
    const menuAbout = document.getElementById('menuAbout');

    function openAbout(){
      closeMenu();
      aboutModal.hidden = false;
      document.body.style.overflow = 'hidden';
    }
    function closeAbout(){
      aboutModal.hidden = true;
      document.body.style.overflow = '';
      document.getElementById('donateStatus').textContent = '';
    }

    menuAbout.addEventListener('click', openAbout);
    aboutClose.addEventListener('click', closeAbout);
    aboutModal.addEventListener('click', (e) => { if(e.target === aboutModal) closeAbout(); });
    document.addEventListener('keydown', (e) => { if(e.key === 'Escape' && !aboutModal.hidden) closeAbout(); });

    // ---- Donate + feedback
    const donateBtn = document.getElementById('donateBtn');
    const feedbackBtn = document.getElementById('feedbackBtn');
    const donateStatus = document.getElementById('donateStatus');

    feedbackBtn.addEventListener('click', () => {
      window.location.href = 'mailto:hello@√≠s.is?subject=√≠s.is%20-%20endurgj√∂f';
    });

    donateBtn.addEventListener('click', async () => {
      donateStatus.textContent = 'Opna grei√∞slus√≠√∞u‚Ä¶';
      donateBtn.disabled = true;

      try{
        // √ûETTA endpoint b√Ωr√∞ √æ√∫ til √≠ Cloudflare (Workers/Functions)
        // √ûa√∞ skilar { url: "https://..." } sem er hosted checkout hj√° grei√∞slug√°tt.
        const res = await fetch('/api/create-checkout', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ source: 'about_modal' })
        });

        if(!res.ok){
          throw new Error('HTTP ' + res.status);
        }

        const data = await res.json();
        if(!data || !data.url) throw new Error('No URL returned');

        window.location.href = data.url;
      }catch(err){
        donateStatus.textContent =
          'Grei√∞slulausn er ekki tengd enn. (Backend endpoint /api/create-checkout vantar).';
        donateBtn.disabled = false;
      }
    });
  </script>
</body>
</html>